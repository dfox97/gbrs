---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import ProjectCard from '../../components/ProjectCard.astro';
import PageHero from '../../components/PageHero.astro';

// Dynamically get all projects involving steel erection
// For now, show agricultural and industrial projects (most involve steel)
const allSteelProjects = await getCollection('projects', ({ data }) => {
  return data.category === 'agricultural' || 
         data.category === 'industrial';
});

// Sort by order
const sortedProjects = allSteelProjects.sort((a, b) => a.data.order - b.data.order);
---

<Layout 
  title="Steel Erection Projects | GBRS Services"
  description="Steel erection and cladding projects by GBRS Services Hartlepool. Portal frames, cladding, and steel structures."
  activePage="services"
>
  <PageHero 
    title="Steel Erection" 
    subtitle="Expert steel frame construction for various structures"
  >
     <div style="margin-top: 20px;">
        <a href="/services" class="btn-secondary" style="background: rgba(255,255,255,0.2); border-color: white;">‚Üê Back to Services</a>
      </div>
  </PageHero>

  <section class="projects section">
    <div class="container">
      <div class="section-header">
        <h2>Steel Erection Projects</h2>
      </div>
      <p class="projects-intro">
        Discover our steel erection projects across the North East. We provide professional and efficient steel frame installation for agricultural, industrial, and commercial buildings.
      </p>
      
      <div class="projects-grid-enhanced">
        {sortedProjects.map(project => (
          <ProjectCard project={project} />
        ))}

        {sortedProjects.length === 0 && (
          <div class="project-card" style="grid-column: 1 / -1; background: var(--light-grey); text-align: center; padding: 60px 20px;">
            <h3 style="margin-bottom: 15px; color: #333;">Projects Coming Soon</h3>
            <p style="margin-bottom: 25px; color: #666;">We're currently uploading our steel erection projects. Check back soon or contact us to discuss your requirements.</p>
            <a href="/#contact" class="btn-primary">Get a Free Quote</a>
          </div>
        )}

        {sortedProjects.length > 0 && (
          <div class="project-card" style="grid-column: 1 / -1; background: var(--light-grey); text-align: center; padding: 60px 20px;">
            <h3 style="margin-bottom: 15px; color: #333;">More Projects Coming Soon</h3>
            <p style="margin-bottom: 25px; color: #666;">We're currently updating our portfolio with 120+ completed projects. Check back soon or contact us to discuss your requirements.</p>
            <a href="/#contact" class="btn-primary">Get a Free Quote</a>
          </div>
        )}
      </div>
    </div>
  </section>
</Layout>
